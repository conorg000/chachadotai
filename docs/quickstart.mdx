---
title: 'Quick Start'
description: 'Integrate ChaCha into your LLM application in 5 minutes using the SafetyLayer SDK'
---

## Prerequisites

Before you begin, ensure you have:

<Check>Node.js 18+ installed</Check>
<Check>npm or pnpm package manager</Check>
<Check>ChaCha account with API key</Check>

<Note>
  ChaCha is a fully hosted platform. Sign up to get your API credentials and start monitoring your LLM application.
</Note>

## Installation

Install the SafetyLayer SDK in your project:

<CodeGroup>

```bash npm
npm install @safetylayer/core
```

```bash pnpm
pnpm add @safetylayer/core
```

```bash yarn
yarn add @safetylayer/core
```

</CodeGroup>

## Get Your API Key

1. Sign up for ChaCha and access your dashboard
2. Create a new project
3. Copy your project ID and API key
4. Set them as environment variables:

```bash
export CHACHA_API_KEY="your_api_key_here"
export CHACHA_PROJECT_ID="proj_abc123"
```

## Your First SDK Integration

Let's integrate ChaCha into your app in under 5 minutes:

<Steps>
  <Step title="Import the SafetyLayer SDK">
    ```typescript
    import { SafetyLayer } from '@safetylayer/core';
    ```
  </Step>

  <Step title="Initialize the Client">
    ```typescript
    const safety = new SafetyLayer({
      apiKey: process.env.CHACHA_API_KEY,
      projectId: process.env.CHACHA_PROJECT_ID,
      endpoint: 'https://api.chacha.ai',
      options: {
        timeout: 10000,  // 10 second timeout
        retries: 3,       // Retry failed requests 3 times
        debug: false,     // Enable for development
      },
    });
    ```
    
    <Note>
      The SDK automatically handles retries, timeouts, and error handling so you don't have to.
    </Note>
  </Step>

  <Step title="Generate a Session ID">
    ```typescript
    // Generate a unique session ID for each user/conversation
    const sessionId = SafetyLayer.generateSessionId();
    // Or use your own: const sessionId = `user_${userId}`;
    ```
  </Step>

  <Step title="Record Events">
    ```typescript
    // Record a user message
    await safety.recordUserMessage(
      sessionId,
      'How do I reset my password?'
    );

    // Generate your LLM response (your existing code)
    const response = await yourLLM.generate(message);

    // Record the assistant's response
    await safety.recordAssistantMessage(
      sessionId,
      response.content
    );

    // If you have chain-of-thought reasoning, record it
    if (response.reasoning) {
      await safety.recordCoT(sessionId, response.reasoning, {
        userInput: message,
        finalOutput: response.content,
      });
    }
    ```
  </Step>

  <Step title="Evaluate Risk">
    ```typescript
    const decision = await safety.evaluate({ sessionId });
    
    console.log(`Risk Score: ${decision.riskScore}`);
    console.log(`Patterns: ${decision.patterns.join(', ')}`);
    
    if (decision.action === 'block') {
      // Session blocked due to safety concerns
      return { error: 'Request blocked for safety reasons' };
    }
    ```
  </Step>
</Steps>

That's it! You now have ChaCha monitoring your LLM application via the SafetyLayer SDK.

## Complete Example

Here's a full integration example:

```typescript
import { SafetyLayer } from '@safetylayer/core';

// Initialize SafetyLayer SDK
const safety = new SafetyLayer({
  apiKey: process.env.CHACHA_API_KEY,
  projectId: process.env.CHACHA_PROJECT_ID,
  endpoint: process.env.CHACHA_ENDPOINT || 'https://api.chacha.ai',
  options: {
    timeout: 10000,
    retries: 3,
    debug: process.env.NODE_ENV === 'development',
  },
});

// Handle a chat message
async function handleChat(userId: string, message: string) {
  const sessionId = `user_${userId}`;

  try {
    // 1. Record user message
    await safety.recordUserMessage(sessionId, message);

    // 2. Check if we should block before processing
    if (await safety.shouldBlock(sessionId)) {
      return {
        error: 'Session blocked due to safety concerns',
        blocked: true,
      };
    }

    // 3. Generate LLM response (your existing code)
    const llmResponse = await generateLLMResponse(message);

    // 4. Record assistant response
    await safety.recordAssistantMessage(sessionId, llmResponse.content);

    // 5. Record chain-of-thought if available
    if (llmResponse.reasoning) {
      await safety.recordCoT(sessionId, llmResponse.reasoning, {
        userInput: message,
        finalOutput: llmResponse.content,
      });
    }

    // 6. Get final risk assessment
    const evaluation = await safety.evaluate({ sessionId });

    return {
      content: llmResponse.content,
      riskScore: evaluation.riskScore,
      patterns: evaluation.patterns,
      action: evaluation.action,
    };
  } catch (error) {
    console.error('SafetyLayer error:', error);
    // Continue with response even if safety check fails
    return {
      error: 'Safety check failed, but request processed',
    };
  }
}
```

## Testing Your Setup

Test your integration by recording some events:

```typescript
// Create a test session
const testSessionId = SafetyLayer.generateSessionId();

// Record a test user message
await safety.recordUserMessage(testSessionId, "Hello, how can you help me?");

// Record a test assistant response
await safety.recordAssistantMessage(testSessionId, "I'm here to help! What would you like to know?");

// Evaluate the session
const result = await safety.evaluate({ sessionId: testSessionId });
console.log('Risk score:', result.riskScore);
console.log('Action:', result.action);
```

You should see the events appear in your ChaCha dashboard!

## SDK Methods

The SafetyLayer SDK provides convenient methods for recording different event types:

### Recording Events

```typescript
// Record user messages
await safety.recordUserMessage(sessionId, "User's message here");

// Record assistant responses
await safety.recordAssistantMessage(sessionId, "Assistant's response here");

// Record chain-of-thought reasoning
await safety.recordCoT(sessionId, "Step by step reasoning...", {
  userInput: "original question",
  finalOutput: "final answer"
});

// Record custom events (e.g., tool calls, system events)
await safety.recordEvent({
  sessionId,
  type: EVENT_TYPES.TOOL_CALL,
  content: JSON.stringify(toolResult),
  metadata: { tool: 'calculator', duration: 150 },
});
```

### Evaluating Risk

```typescript
// Full evaluation with detailed results
const evaluation = await safety.evaluate({ 
  sessionId,
  forceAnalysis: true  // Force re-analysis even if recently evaluated
});
console.log('Risk:', evaluation.riskScore);
console.log('Patterns:', evaluation.patterns);
console.log('Action:', evaluation.action);  // 'allow', 'block', 'flag', 'notify'
console.log('Reasons:', evaluation.reasons);

// Quick boolean check
const shouldBlock = await safety.shouldBlock(sessionId);
if (shouldBlock) {
  return { error: 'Request blocked for safety' };
}
```

### Session Management

```typescript
// Generate unique session IDs
const sessionId = SafetyLayer.generateSessionId();
// Returns: "sess_<timestamp>_<random>"

// Or use your own session identifiers
const sessionId = `user_${userId}_${conversationId}`;
```

## Error Handling

The SDK includes automatic retry logic and error handling:

```typescript
import {
  SafetyLayer,
  SafetyLayerError,
  NetworkError,
  ValidationError,
} from '@safetylayer/core';

try {
  await safety.recordEvent({ ... });
} catch (error) {
  if (error instanceof SafetyLayerError) {
    console.error('API error:', error.code, error.message);
    console.error('Status:', error.statusCode);
  } else if (error instanceof NetworkError) {
    console.error('Network error:', error.message);
    // Maybe retry or use fallback
  } else if (error instanceof ValidationError) {
    console.error('Invalid request:', error.message);
    // Fix the request data
  }
}
```

## Configuration Options

Customize the SDK behavior to fit your needs:

```typescript
const safety = new SafetyLayer({
  // Required
  apiKey: 'your_api_key',           // Your ChaCha API key
  projectId: 'proj_abc123',          // Your project ID
  
  // Optional
  endpoint: 'https://api.chacha.ai', // ChaCha backend URL
  
  options: {
    timeout: 15000,    // Request timeout in ms (default: 10000)
    retries: 5,        // Max retry attempts (default: 3)
    debug: true,       // Enable debug logging (default: false)
  },
});
```

### Advanced Configuration

The SDK automatically handles:
- **Retries with exponential backoff** for network errors and rate limits
- **Request timeouts** to prevent hanging requests
- **Error handling** with typed exceptions for better debugging
- **Connection pooling** for optimal performance

## What's Next?

<CardGroup cols={2}>
  <Card
    title="Integration Guide"
    icon="puzzle-piece"
    href="/guides/integration"
  >
    Learn integration patterns for Express, Next.js, and more
  </Card>
  
  <Card
    title="SDK API Reference"
    icon="code"
    href="/api-reference/safetylayer-client"
  >
    Explore all SDK methods and options
  </Card>
  
  <Card
    title="Backend Integration"
    icon="server"
    href="/guides/backend-integration"
  >
    Connect to the ChaCha backend
  </Card>
  
  <Card
    title="Architecture"
    icon="sitemap"
    href="/architecture"
  >
    Learn how ChaCha works
  </Card>
</CardGroup>

## Common Issues

<AccordionGroup>
  <Accordion title="Authentication errors" icon="key">
    Verify your API key and project ID:
    ```typescript
    // Check environment variables are set
    console.log('API Key:', process.env.CHACHA_API_KEY);
    console.log('Project ID:', process.env.CHACHA_PROJECT_ID);
    ```
    Make sure your API key is active in the ChaCha dashboard.
  </Accordion>

  <Accordion title="Connection errors" icon="wifi">
    Check that:
    1. You can reach the ChaCha backend: `curl https://api.chacha.ai/health`
    2. Your `endpoint` in SDK config is correct
    3. No firewall blocking outbound HTTPS requests
    4. Your API key has not expired
  </Accordion>

  <Accordion title="Validation errors" icon="triangle-exclamation">
    Ensure your requests match the expected format:
    - `sessionId` must be a non-empty string
    - `projectId` must match format `proj_*`
    - Event `type` must be a valid event type
  </Accordion>

  <Accordion title="TypeScript errors" icon="code">
    Rebuild the SDK package:
    ```bash
    npm run build -w @safetylayer/core
    ```
  </Accordion>
</AccordionGroup>

## Need Help?

<CardGroup cols={2}>
  <Card
    title="GitHub Repository"
    icon="github"
    href="https://github.com/conorg000/chachadotai"
  >
    View source code and report issues
  </Card>
  
  <Card
    title="Documentation"
    icon="book"
    href="/api-reference/safetylayer-client"
  >
    Explore the full SDK reference
  </Card>
</CardGroup>
