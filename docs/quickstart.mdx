---
title: 'Quick Start'
description: 'Get SafetyLayer SDK running in your application in 5 minutes'
---

## Prerequisites

Before you begin, ensure you have:

<Check>Node.js 18+ installed</Check>
<Check>npm or pnpm package manager</Check>
<Check>SafetyLayer backend running (see [Backend Setup](/guides/backend-integration))</Check>

<Note>
  For this quickstart, we'll use the local demo backend. In production, you'll point to your hosted backend.
</Note>

## Installation

Install the SafetyLayer SDK in your project:

<CodeGroup>

```bash npm
npm install @safetylayer/core
```

```bash pnpm
pnpm add @safetylayer/core
```

```bash yarn
yarn add @safetylayer/core
```

</CodeGroup>

## Start the Backend

First, make sure the backend API is running:

```bash
# In the monorepo
npm run dev -w demo-api
```

The backend will start on `http://localhost:3001`. Keep this running in a separate terminal.

## Your First SDK Integration

Let's integrate SafetyLayer into your app in under 5 minutes:

<Steps>
  <Step title="Import SafetyLayer">
    ```typescript
    import { SafetyLayer } from '@safetylayer/core';
    ```
  </Step>

  <Step title="Initialize the Client">
    ```typescript
    const safety = new SafetyLayer({
      apiKey: process.env.SAFETYLAYER_API_KEY || 'demo_key',
      projectId: 'proj_demo',
      endpoint: 'http://localhost:3001',
    });
    ```
    
    <Note>
      The demo backend doesn't require authentication. In production, use real API keys.
    </Note>
  </Step>

  <Step title="Generate a Session ID">
    ```typescript
    // Generate a unique session ID for each user/conversation
    const sessionId = SafetyLayer.generateSessionId();
    // Or use your own: const sessionId = `user_${userId}`;
    ```
  </Step>

  <Step title="Record Events">
    ```typescript
    // Record a user message
    await safety.recordUserMessage(
      sessionId,
      'How do I reset my password?'
    );

    // Generate your LLM response (your existing code)
    const response = await yourLLM.generate(message);

    // Record the assistant's response
    await safety.recordAssistantMessage(
      sessionId,
      response.content
    );

    // If you have chain-of-thought reasoning, record it
    if (response.reasoning) {
      await safety.recordCoT(sessionId, response.reasoning, {
        userInput: message,
        finalOutput: response.content,
      });
    }
    ```
  </Step>

  <Step title="Evaluate Risk">
    ```typescript
    const decision = await safety.evaluate({ sessionId });
    
    console.log(`Risk Score: ${decision.riskScore}`);
    console.log(`Patterns: ${decision.patterns.join(', ')}`);
    
    if (decision.action === 'block') {
      // Session blocked due to safety concerns
      return { error: 'Request blocked for safety reasons' };
    }
    ```
  </Step>
</Steps>

That's it! You now have SafetyLayer monitoring your LLM application.

## Complete Example

Here's a full integration example:

```typescript
import { SafetyLayer } from '@safetylayer/core';

// Initialize SDK
const safety = new SafetyLayer({
  apiKey: process.env.SAFETYLAYER_API_KEY,
  projectId: 'proj_demo',
  endpoint: process.env.BACKEND_URL || 'http://localhost:3001',
  options: {
    timeout: 10000,
    retries: 3,
    debug: process.env.NODE_ENV === 'development',
  },
});

// Handle a chat message
async function handleChat(userId: string, message: string) {
  const sessionId = `user_${userId}`;

  try {
    // 1. Record user message
    await safety.recordUserMessage(sessionId, message);

    // 2. Check if we should block before processing
    if (await safety.shouldBlock(sessionId)) {
      return {
        error: 'Session blocked due to safety concerns',
        blocked: true,
      };
    }

    // 3. Generate LLM response (your existing code)
    const llmResponse = await generateLLMResponse(message);

    // 4. Record assistant response
    await safety.recordAssistantMessage(sessionId, llmResponse.content);

    // 5. Record chain-of-thought if available
    if (llmResponse.reasoning) {
      await safety.recordCoT(sessionId, llmResponse.reasoning, {
        userInput: message,
        finalOutput: llmResponse.content,
      });
    }

    // 6. Get final risk assessment
    const evaluation = await safety.evaluate({ sessionId });

    return {
      content: llmResponse.content,
      riskScore: evaluation.riskScore,
      patterns: evaluation.patterns,
      action: evaluation.action,
    };
  } catch (error) {
    console.error('SafetyLayer error:', error);
    // Continue with response even if safety check fails
    return {
      error: 'Safety check failed, but request processed',
    };
  }
}
```

## Testing Your Setup

Verify everything works with the demo:

<CodeGroup>

```bash Test with cURL
curl -X POST http://localhost:3001/chat \
  -H "Content-Type: application/json" \
  -d '{
    "sessionId": "test_session",
    "userMessage": "Hello, how can you help me?"
  }'
```

```bash Run Test Script
./test-api.sh
```

```bash Run SDK Tests
npm test -w @safetylayer/core
```

</CodeGroup>

## Convenience Methods

The SDK provides several convenience methods:

```typescript
// Record specific event types
await safety.recordUserMessage(sessionId, content);
await safety.recordAssistantMessage(sessionId, content);
await safety.recordCoT(sessionId, reasoning);

// Quick risk check
const shouldBlock = await safety.shouldBlock(sessionId);

// Record any event type
await safety.recordEvent({
  sessionId,
  type: EVENT_TYPES.TOOL_CALL,
  content: JSON.stringify(toolResult),
  metadata: { tool: 'calculator' },
});
```

## Error Handling

The SDK includes automatic retry logic and error handling:

```typescript
import {
  SafetyLayer,
  SafetyLayerError,
  NetworkError,
  ValidationError,
} from '@safetylayer/core';

try {
  await safety.recordEvent({ ... });
} catch (error) {
  if (error instanceof SafetyLayerError) {
    console.error('API error:', error.code, error.message);
    console.error('Status:', error.statusCode);
  } else if (error instanceof NetworkError) {
    console.error('Network error:', error.message);
    // Maybe retry or use fallback
  } else if (error instanceof ValidationError) {
    console.error('Invalid request:', error.message);
    // Fix the request data
  }
}
```

## Configuration Options

Customize the SDK behavior:

```typescript
const safety = new SafetyLayer({
  apiKey: 'your_api_key',
  projectId: 'proj_abc123',
  endpoint: 'https://api.safetylayer.dev', // Production endpoint
  options: {
    timeout: 15000,      // 15 second timeout
    retries: 5,          // Retry 5 times on failure
    debug: true,         // Log debug info
  },
});
```

## What's Next?

<CardGroup cols={2}>
  <Card
    title="Integration Guide"
    icon="puzzle-piece"
    href="/guides/integration"
  >
    Learn integration patterns for Express, Next.js, and more
  </Card>
  
  <Card
    title="SDK API Reference"
    icon="code"
    href="/api-reference/safetylayer-client"
  >
    Explore all SDK methods and options
  </Card>
  
  <Card
    title="Backend Setup"
    icon="server"
    href="/guides/backend-integration"
  >
    Set up your own backend instance
  </Card>
  
  <Card
    title="Demo"
    icon="play"
    href="/demo/running-demo"
  >
    Run the complete demo
  </Card>
</CardGroup>

## Common Issues

<AccordionGroup>
  <Accordion title="Backend not running" icon="server">
    Make sure the backend API is started:
    ```bash
    npm run dev -w demo-api
    ```
    Verify it's accessible at `http://localhost:3001/health`
  </Accordion>

  <Accordion title="Connection errors" icon="wifi">
    Check that:
    1. Backend is running on the correct port
    2. `endpoint` in SDK config matches backend URL
    3. No firewall blocking the connection
  </Accordion>

  <Accordion title="Validation errors" icon="triangle-exclamation">
    Ensure your requests match the expected format:
    - `sessionId` must be a non-empty string
    - `projectId` must match format `proj_*`
    - Event `type` must be a valid event type
  </Accordion>

  <Accordion title="TypeScript errors" icon="code">
    Rebuild the SDK package:
    ```bash
    npm run build -w @safetylayer/core
    ```
  </Accordion>
</AccordionGroup>

## Need Help?

<CardGroup cols={2}>
  <Card
    title="GitHub Issues"
    icon="github"
    href="https://github.com/safetylayer/safetylayer/issues"
  >
    Report bugs or request features
  </Card>
  
  <Card
    title="Discord Community"
    icon="discord"
    href="https://discord.gg/safetylayer"
  >
    Get help from the community
  </Card>
</CardGroup>
